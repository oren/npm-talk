var fs = require('fs');

var domify = require('domify');
var inherits = require('inherits');
var EventEmitter = require('events').EventEmitter;
var RCSS = require('rcss');

var html = fs.readFileSync(__dirname + '/widget.html', 'utf8');

var style = require('./style.js');

inherits(Widget, EventEmitter);
module.exports = Widget;

function Widget (opts) {
    if (!(this instanceof Widget)) return new Widget(opts);
    this.element = domify(html);
    this.element.className = style.className;
}

Widget.prototype.appendTo = function (target) {
    if (typeof target === 'string') target = document.querySelector(target);
    target.appendChild(this.element);
    this.emit('append', target);
};

Widget.prototype.setName = function (name) {
      this.element.querySelector('.name').textContent = name;
}

Widget.prototype.setMessage = function (msg) {
      this.element.querySelector('.msg').textContent = msg;
}
